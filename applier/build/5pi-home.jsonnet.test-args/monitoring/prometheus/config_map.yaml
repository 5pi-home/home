"apiVersion": "v1"
"data":
  "kubernetes.alerting.rules.yaml": "\"groups\":\n- \"name\": \"kubernetes-apps\"\n  \"rules\":\n  - \"alert\": \"KubePodCrashLooping\"\n    \"annotations\":\n      \"description\": \"Pod {{ $labels.namespace }}/{{ $labels.pod }} ({{ $labels.container }}) is restarting {{ printf \\\"%.2f\\\" $value }} times / 5 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodcrashlooping\"\n      \"summary\": \"Pod is crash looping.\"\n    \"expr\": |\n      rate(kube_pod_container_status_restarts_total{job=\"kube-state-metrics\"}[5m]) * 60 * 5 > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubePodNotReady\"\n    \"annotations\":\n      \"description\": \"Pod {{ $labels.namespace }}/{{ $labels.pod }} has been in a non-ready state for longer than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodnotready\"\n      \"summary\": \"Pod has been in a non-ready state for more than 15 minutes.\"\n    \"expr\": |\n      sum by (namespace, pod) (\n        max by(namespace, pod) (\n          kube_pod_status_phase{job=\"kube-state-metrics\", phase=~\"Pending|Unknown\"}\n        ) * on(namespace, pod) group_left(owner_kind) topk by(namespace, pod) (\n          1, max by(namespace, pod, owner_kind) (kube_pod_owner{owner_kind!=\"Job\"})\n        )\n      ) > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeDeploymentGenerationMismatch\"\n    \"annotations\":\n      \"description\": \"Deployment generation for {{ $labels.namespace }}/{{ $labels.deployment }} does not match, this indicates that the Deployment has failed but has not been rolled back.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentgenerationmismatch\"\n      \"summary\": \"Deployment generation mismatch due to possible roll-back\"\n    \"expr\": |\n      kube_deployment_status_observed_generation{job=\"kube-state-metrics\"}\n        !=\n      kube_deployment_metadata_generation{job=\"kube-state-metrics\"}\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeDeploymentReplicasMismatch\"\n    \"annotations\":\n      \"description\": \"Deployment {{ $labels.namespace }}/{{ $labels.deployment }} has not matched the expected number of replicas for longer than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentreplicasmismatch\"\n      \"summary\": \"Deployment has not matched the expected number of replicas.\"\n    \"expr\": |\n      (\n        kube_deployment_spec_replicas{job=\"kube-state-metrics\"}\n          !=\n        kube_deployment_status_replicas_available{job=\"kube-state-metrics\"}\n      ) and (\n        changes(kube_deployment_status_replicas_updated{job=\"kube-state-metrics\"}[5m])\n          ==\n        0\n      )\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeStatefulSetReplicasMismatch\"\n    \"annotations\":\n      \"description\": \"StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} has not matched the expected number of replicas for longer than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetreplicasmismatch\"\n      \"summary\": \"Deployment has not matched the expected number of replicas.\"\n    \"expr\": |\n      (\n        kube_statefulset_status_replicas_ready{job=\"kube-state-metrics\"}\n          !=\n        kube_statefulset_status_replicas{job=\"kube-state-metrics\"}\n      ) and (\n        changes(kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\"}[5m])\n          ==\n        0\n      )\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeStatefulSetGenerationMismatch\"\n    \"annotations\":\n      \"description\": \"StatefulSet generation for {{ $labels.namespace }}/{{ $labels.statefulset }} does not match, this indicates that the StatefulSet has failed but has not been rolled back.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetgenerationmismatch\"\n      \"summary\": \"StatefulSet generation mismatch due to possible roll-back\"\n    \"expr\": |\n      kube_statefulset_status_observed_generation{job=\"kube-state-metrics\"}\n        !=\n      kube_statefulset_metadata_generation{job=\"kube-state-metrics\"}\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeStatefulSetUpdateNotRolledOut\"\n    \"annotations\":\n      \"description\": \"StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} update has not been rolled out.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetupdatenotrolledout\"\n      \"summary\": \"StatefulSet update has not been rolled out.\"\n    \"expr\": |\n      (\n        max without (revision) (\n          kube_statefulset_status_current_revision{job=\"kube-state-metrics\"}\n            unless\n          kube_statefulset_status_update_revision{job=\"kube-state-metrics\"}\n        )\n          *\n        (\n          kube_statefulset_replicas{job=\"kube-state-metrics\"}\n            !=\n          kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\"}\n        )\n      )  and (\n        changes(kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\"}[5m])\n          ==\n        0\n      )\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeDaemonSetRolloutStuck\"\n    \"annotations\":\n      \"description\": \"DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} has not finished or progressed for at least 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetrolloutstuck\"\n      \"summary\": \"DaemonSet rollout is stuck.\"\n    \"expr\": |\n      (\n        (\n          kube_daemonset_status_current_number_scheduled{job=\"kube-state-metrics\"}\n           !=\n          kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n        ) or (\n          kube_daemonset_status_number_misscheduled{job=\"kube-state-metrics\"}\n           !=\n          0\n        ) or (\n          kube_daemonset_updated_number_scheduled{job=\"kube-state-metrics\"}\n           !=\n          kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n        ) or (\n          kube_daemonset_status_number_available{job=\"kube-state-metrics\"}\n           !=\n          kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n        )\n      ) and (\n        changes(kube_daemonset_updated_number_scheduled{job=\"kube-state-metrics\"}[5m])\n          ==\n        0\n      )\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeContainerWaiting\"\n    \"annotations\":\n      \"description\": \"Pod {{ $labels.namespace }}/{{ $labels.pod }} container {{ $labels.container}} has been in waiting state for longer than 1 hour.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontainerwaiting\"\n      \"summary\": \"Pod container waiting longer than 1 hour\"\n    \"expr\": |\n      sum by (namespace, pod, container) (kube_pod_container_status_waiting_reason{job=\"kube-state-metrics\"}) > 0\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeDaemonSetNotScheduled\"\n    \"annotations\":\n      \"description\": \"{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are not scheduled.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetnotscheduled\"\n      \"summary\": \"DaemonSet pods are not scheduled.\"\n    \"expr\": |\n      kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n        -\n      kube_daemonset_status_current_number_scheduled{job=\"kube-state-metrics\"} > 0\n    \"for\": \"10m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeDaemonSetMisScheduled\"\n    \"annotations\":\n      \"description\": \"{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are running where they are not supposed to run.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetmisscheduled\"\n      \"summary\": \"DaemonSet pods are misscheduled.\"\n    \"expr\": |\n      kube_daemonset_status_number_misscheduled{job=\"kube-state-metrics\"} > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeJobCompletion\"\n    \"annotations\":\n      \"description\": \"Job {{ $labels.namespace }}/{{ $labels.job_name }} is taking more than 12 hours to complete.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobcompletion\"\n      \"summary\": \"Job did not complete in time\"\n    \"expr\": |\n      kube_job_spec_completions{job=\"kube-state-metrics\"} - kube_job_status_succeeded{job=\"kube-state-metrics\"}  > 0\n    \"for\": \"12h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeJobFailed\"\n    \"annotations\":\n      \"description\": \"Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete. Removing failed job after investigation should clear this alert.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobfailed\"\n      \"summary\": \"Job failed to complete.\"\n    \"expr\": |\n      kube_job_failed{job=\"kube-state-metrics\"}  > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeHpaReplicasMismatch\"\n    \"annotations\":\n      \"description\": \"HPA {{ $labels.namespace }}/{{ $labels.hpa }} has not matched the desired number of replicas for longer than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpareplicasmismatch\"\n      \"summary\": \"HPA has not matched descired number of replicas.\"\n    \"expr\": |\n      (kube_hpa_status_desired_replicas{job=\"kube-state-metrics\"}\n        !=\n      kube_hpa_status_current_replicas{job=\"kube-state-metrics\"})\n        and\n      (kube_hpa_status_current_replicas{job=\"kube-state-metrics\"}\n        >\n      kube_hpa_spec_min_replicas{job=\"kube-state-metrics\"})\n        and\n      (kube_hpa_status_current_replicas{job=\"kube-state-metrics\"}\n        <\n      kube_hpa_spec_max_replicas{job=\"kube-state-metrics\"})\n        and\n      changes(kube_hpa_status_current_replicas[15m]) == 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeHpaMaxedOut\"\n    \"annotations\":\n      \"description\": \"HPA {{ $labels.namespace }}/{{ $labels.hpa }} has been running at max replicas for longer than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpamaxedout\"\n      \"summary\": \"HPA is running at max replicas\"\n    \"expr\": |\n      kube_hpa_status_current_replicas{job=\"kube-state-metrics\"}\n        ==\n      kube_hpa_spec_max_replicas{job=\"kube-state-metrics\"}\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n- \"name\": \"kubernetes-resources\"\n  \"rules\":\n  - \"alert\": \"KubeCPUOvercommit\"\n    \"annotations\":\n      \"description\": \"Cluster has overcommitted CPU resource requests for Pods and cannot tolerate node failure.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuovercommit\"\n      \"summary\": \"Cluster has overcommitted CPU resource requests.\"\n    \"expr\": |\n      sum(namespace:kube_pod_container_resource_requests_cpu_cores:sum{})\n        /\n      sum(kube_node_status_allocatable_cpu_cores)\n        >\n      (count(kube_node_status_allocatable_cpu_cores)-1) / count(kube_node_status_allocatable_cpu_cores)\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeMemoryOvercommit\"\n    \"annotations\":\n      \"description\": \"Cluster has overcommitted memory resource requests for Pods and cannot tolerate node failure.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryovercommit\"\n      \"summary\": \"Cluster has overcommitted memory resource requests.\"\n    \"expr\": |\n      sum(namespace:kube_pod_container_resource_requests_memory_bytes:sum{})\n        /\n      sum(kube_node_status_allocatable_memory_bytes)\n        >\n      (count(kube_node_status_allocatable_memory_bytes)-1)\n        /\n      count(kube_node_status_allocatable_memory_bytes)\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeCPUQuotaOvercommit\"\n    \"annotations\":\n      \"description\": \"Cluster has overcommitted CPU resource requests for Namespaces.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuquotaovercommit\"\n      \"summary\": \"Cluster has overcommitted CPU resource requests.\"\n    \"expr\": |\n      sum(kube_resourcequota{job=\"kube-state-metrics\", type=\"hard\", resource=\"cpu\"})\n        /\n      sum(kube_node_status_allocatable_cpu_cores)\n        > 1.5\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeMemoryQuotaOvercommit\"\n    \"annotations\":\n      \"description\": \"Cluster has overcommitted memory resource requests for Namespaces.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryquotaovercommit\"\n      \"summary\": \"Cluster has overcommitted memory resource requests.\"\n    \"expr\": |\n      sum(kube_resourcequota{job=\"kube-state-metrics\", type=\"hard\", resource=\"memory\"})\n        /\n      sum(kube_node_status_allocatable_memory_bytes{job=\"kube-state-metrics\"})\n        > 1.5\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeQuotaAlmostFull\"\n    \"annotations\":\n      \"description\": \"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaalmostfull\"\n      \"summary\": \"Namespace quota is going to be full.\"\n    \"expr\": |\n      kube_resourcequota{job=\"kube-state-metrics\", type=\"used\"}\n        / ignoring(instance, job, type)\n      (kube_resourcequota{job=\"kube-state-metrics\", type=\"hard\"} > 0)\n        > 0.9 < 1\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"info\"\n  - \"alert\": \"KubeQuotaFullyUsed\"\n    \"annotations\":\n      \"description\": \"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotafullyused\"\n      \"summary\": \"Namespace quota is fully used.\"\n    \"expr\": |\n      kube_resourcequota{job=\"kube-state-metrics\", type=\"used\"}\n        / ignoring(instance, job, type)\n      (kube_resourcequota{job=\"kube-state-metrics\", type=\"hard\"} > 0)\n        == 1\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"info\"\n  - \"alert\": \"KubeQuotaExceeded\"\n    \"annotations\":\n      \"description\": \"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaexceeded\"\n      \"summary\": \"Namespace quota has exceeded the limits.\"\n    \"expr\": |\n      kube_resourcequota{job=\"kube-state-metrics\", type=\"used\"}\n        / ignoring(instance, job, type)\n      (kube_resourcequota{job=\"kube-state-metrics\", type=\"hard\"} > 0)\n        > 1\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"CPUThrottlingHigh\"\n    \"annotations\":\n      \"description\": \"{{ $value | humanizePercentage }} throttling of CPU in namespace {{ $labels.namespace }} for container {{ $labels.container }} in pod {{ $labels.pod }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-cputhrottlinghigh\"\n      \"summary\": \"Processes experience elevated CPU throttling.\"\n    \"expr\": |\n      sum(increase(container_cpu_cfs_throttled_periods_total{container!=\"\", }[5m])) by (container, pod, namespace)\n        /\n      sum(increase(container_cpu_cfs_periods_total{}[5m])) by (container, pod, namespace)\n        > ( 25 / 100 )\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"info\"\n- \"name\": \"kubernetes-storage\"\n  \"rules\":\n  - \"alert\": \"KubePersistentVolumeFillingUp\"\n    \"annotations\":\n      \"description\": \"The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} is only {{ $value | humanizePercentage }} free.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup\"\n      \"summary\": \"PersistentVolume is filling up.\"\n    \"expr\": |\n      kubelet_volume_stats_available_bytes{job=\"kubelet\"}\n        /\n      kubelet_volume_stats_capacity_bytes{job=\"kubelet\"}\n        < 0.03\n    \"for\": \"1m\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"KubePersistentVolumeFillingUp\"\n    \"annotations\":\n      \"description\": \"Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} is expected to fill up within four days. Currently {{ $value | humanizePercentage }} is available.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup\"\n      \"summary\": \"PersistentVolume is filling up.\"\n    \"expr\": |\n      (\n        kubelet_volume_stats_available_bytes{job=\"kubelet\"}\n          /\n        kubelet_volume_stats_capacity_bytes{job=\"kubelet\"}\n      ) < 0.15\n      and\n      predict_linear(kubelet_volume_stats_available_bytes{job=\"kubelet\"}[6h], 4 * 24 * 3600) < 0\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubePersistentVolumeErrors\"\n    \"annotations\":\n      \"description\": \"The persistent volume {{ $labels.persistentvolume }} has status {{ $labels.phase }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeerrors\"\n      \"summary\": \"PersistentVolume is having issues with provisioning.\"\n    \"expr\": |\n      kube_persistentvolume_status_phase{phase=~\"Failed|Pending\",job=\"kube-state-metrics\"} > 0\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"critical\"\n- \"name\": \"kubernetes-system\"\n  \"rules\":\n  - \"alert\": \"KubeVersionMismatch\"\n    \"annotations\":\n      \"description\": \"There are {{ $value }} different semantic versions of Kubernetes components running.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeversionmismatch\"\n      \"summary\": \"Different semantic versions of Kubernetes components running.\"\n    \"expr\": |\n      count(count by (gitVersion) (label_replace(kubernetes_build_info{job!~\"kube-dns|coredns\"},\"gitVersion\",\"$1\",\"gitVersion\",\"(v[0-9]*.[0-9]*).*\"))) > 1\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeClientErrors\"\n    \"annotations\":\n      \"description\": \"Kubernetes API server client '{{ $labels.job }}/{{ $labels.instance }}' is experiencing {{ $value | humanizePercentage }} errors.'\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclienterrors\"\n      \"summary\": \"Kubernetes API server client is experiencing errors.\"\n    \"expr\": |\n      (sum(rate(rest_client_requests_total{code=~\"5..\"}[5m])) by (instance, job)\n        /\n      sum(rate(rest_client_requests_total[5m])) by (instance, job))\n      > 0.01\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n- \"name\": \"kube-apiserver-slos\"\n  \"rules\":\n  - \"alert\": \"KubeAPIErrorBudgetBurn\"\n    \"annotations\":\n      \"description\": \"The API server is burning too much error budget.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn\"\n      \"summary\": \"The API server is burning too much error budget.\"\n    \"expr\": |\n      sum(apiserver_request:burnrate1h) > (14.40 * 0.01000)\n      and\n      sum(apiserver_request:burnrate5m) > (14.40 * 0.01000)\n    \"for\": \"2m\"\n    \"labels\":\n      \"long\": \"1h\"\n      \"severity\": \"critical\"\n      \"short\": \"5m\"\n  - \"alert\": \"KubeAPIErrorBudgetBurn\"\n    \"annotations\":\n      \"description\": \"The API server is burning too much error budget.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn\"\n      \"summary\": \"The API server is burning too much error budget.\"\n    \"expr\": |\n      sum(apiserver_request:burnrate6h) > (6.00 * 0.01000)\n      and\n      sum(apiserver_request:burnrate30m) > (6.00 * 0.01000)\n    \"for\": \"15m\"\n    \"labels\":\n      \"long\": \"6h\"\n      \"severity\": \"critical\"\n      \"short\": \"30m\"\n  - \"alert\": \"KubeAPIErrorBudgetBurn\"\n    \"annotations\":\n      \"description\": \"The API server is burning too much error budget.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn\"\n      \"summary\": \"The API server is burning too much error budget.\"\n    \"expr\": |\n      sum(apiserver_request:burnrate1d) > (3.00 * 0.01000)\n      and\n      sum(apiserver_request:burnrate2h) > (3.00 * 0.01000)\n    \"for\": \"1h\"\n    \"labels\":\n      \"long\": \"1d\"\n      \"severity\": \"warning\"\n      \"short\": \"2h\"\n  - \"alert\": \"KubeAPIErrorBudgetBurn\"\n    \"annotations\":\n      \"description\": \"The API server is burning too much error budget.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn\"\n      \"summary\": \"The API server is burning too much error budget.\"\n    \"expr\": |\n      sum(apiserver_request:burnrate3d) > (1.00 * 0.01000)\n      and\n      sum(apiserver_request:burnrate6h) > (1.00 * 0.01000)\n    \"for\": \"3h\"\n    \"labels\":\n      \"long\": \"3d\"\n      \"severity\": \"warning\"\n      \"short\": \"6h\"\n- \"name\": \"kubernetes-system-apiserver\"\n  \"rules\":\n  - \"alert\": \"KubeClientCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"A client certificate used to authenticate to the apiserver is expiring in less than 7.0 days.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration\"\n      \"summary\": \"Client certificate is about to expire.\"\n    \"expr\": |\n      apiserver_client_certificate_expiration_seconds_count{job=\"kube-apiserver\"} > 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=\"kube-apiserver\"}[5m]))) < 604800\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeClientCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"A client certificate used to authenticate to the apiserver is expiring in less than 24.0 hours.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration\"\n      \"summary\": \"Client certificate is about to expire.\"\n    \"expr\": |\n      apiserver_client_certificate_expiration_seconds_count{job=\"kube-apiserver\"} > 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=\"kube-apiserver\"}[5m]))) < 86400\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"AggregatedAPIErrors\"\n    \"annotations\":\n      \"description\": \"An aggregated API {{ $labels.name }}/{{ $labels.namespace }} has reported errors. The number of errors have increased for it in the past five minutes. High values indicate that the availability of the service changes too often.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-aggregatedapierrors\"\n      \"summary\": \"An aggregated API has reported errors.\"\n    \"expr\": |\n      sum by(name, namespace)(increase(aggregator_unavailable_apiservice_count[5m])) > 2\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"AggregatedAPIDown\"\n    \"annotations\":\n      \"description\": \"An aggregated API {{ $labels.name }}/{{ $labels.namespace }} has been only {{ $value | humanize }}% available over the last 10m.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-aggregatedapidown\"\n      \"summary\": \"An aggregated API is down.\"\n    \"expr\": |\n      (1 - max by(name, namespace)(avg_over_time(aggregator_unavailable_apiservice[10m]))) * 100 < 85\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeAPIDown\"\n    \"annotations\":\n      \"description\": \"KubeAPI has disappeared from Prometheus target discovery.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapidown\"\n      \"summary\": \"Target disappeared from Prometheus target discovery.\"\n    \"expr\": |\n      absent(up{job=\"kube-apiserver\"} == 1)\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"critical\"\n- \"name\": \"kubernetes-system-kubelet\"\n  \"rules\":\n  - \"alert\": \"KubeNodeNotReady\"\n    \"annotations\":\n      \"description\": \"{{ $labels.node }} has been unready for more than 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodenotready\"\n      \"summary\": \"Node is not ready.\"\n    \"expr\": |\n      kube_node_status_condition{job=\"kube-state-metrics\",condition=\"Ready\",status=\"true\"} == 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeNodeUnreachable\"\n    \"annotations\":\n      \"description\": \"{{ $labels.node }} is unreachable and some workloads may be rescheduled.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeunreachable\"\n      \"summary\": \"Node is unreachable.\"\n    \"expr\": |\n      (kube_node_spec_taint{job=\"kube-state-metrics\",key=\"node.kubernetes.io/unreachable\",effect=\"NoSchedule\"} unless ignoring(key,value) kube_node_spec_taint{job=\"kube-state-metrics\",key=~\"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn\"}) == 1\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletTooManyPods\"\n    \"annotations\":\n      \"description\": \"Kubelet '{{ $labels.node }}' is running at {{ $value | humanizePercentage }} of its Pod capacity.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubelettoomanypods\"\n      \"summary\": \"Kubelet is running at capacity.\"\n    \"expr\": |\n      count by(node) (\n        (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} == 1) * on(instance,pod,namespace,cluster) group_left(node) topk by(instance,pod,namespace,cluster) (1, kube_pod_info{job=\"kube-state-metrics\"})\n      )\n      /\n      max by(node) (\n        kube_node_status_capacity_pods{job=\"kube-state-metrics\"} != 1\n      ) > 0.95\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeNodeReadinessFlapping\"\n    \"annotations\":\n      \"description\": \"The readiness status of node {{ $labels.node }} has changed {{ $value }} times in the last 15 minutes.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodereadinessflapping\"\n      \"summary\": \"Node readiness status is flapping.\"\n    \"expr\": |\n      sum(changes(kube_node_status_condition{status=\"true\",condition=\"Ready\"}[15m])) by (node) > 2\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletPlegDurationHigh\"\n    \"annotations\":\n      \"description\": \"The Kubelet Pod Lifecycle Event Generator has a 99th percentile duration of {{ $value }} seconds on node {{ $labels.node }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletplegdurationhigh\"\n      \"summary\": \"Kubelet Pod Lifecycle Event Generator is taking too long to relist.\"\n    \"expr\": |\n      node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile{quantile=\"0.99\"} >= 10\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletPodStartUpLatencyHigh\"\n    \"annotations\":\n      \"description\": \"Kubelet Pod startup 99th percentile latency is {{ $value }} seconds on node {{ $labels.node }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletpodstartuplatencyhigh\"\n      \"summary\": \"Kubelet Pod startup latency is too high.\"\n    \"expr\": |\n      histogram_quantile(0.99, sum(rate(kubelet_pod_worker_duration_seconds_bucket{job=\"kubelet\"}[5m])) by (instance, le)) * on(instance) group_left(node) kubelet_node_name{job=\"kubelet\"} > 60\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletClientCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration\"\n      \"summary\": \"Kubelet client certificate is about to expire.\"\n    \"expr\": |\n      kubelet_certificate_manager_client_ttl_seconds < 604800\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletClientCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration\"\n      \"summary\": \"Kubelet client certificate is about to expire.\"\n    \"expr\": |\n      kubelet_certificate_manager_client_ttl_seconds < 86400\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"KubeletServerCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration\"\n      \"summary\": \"Kubelet server certificate is about to expire.\"\n    \"expr\": |\n      kubelet_certificate_manager_server_ttl_seconds < 604800\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletServerCertificateExpiration\"\n    \"annotations\":\n      \"description\": \"Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration\"\n      \"summary\": \"Kubelet server certificate is about to expire.\"\n    \"expr\": |\n      kubelet_certificate_manager_server_ttl_seconds < 86400\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"KubeletClientCertificateRenewalErrors\"\n    \"annotations\":\n      \"description\": \"Kubelet on node {{ $labels.node }} has failed to renew its client certificate ({{ $value | humanize }} errors in the last 5 minutes).\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificaterenewalerrors\"\n      \"summary\": \"Kubelet has failed to renew its client certificate.\"\n    \"expr\": |\n      increase(kubelet_certificate_manager_client_expiration_renew_errors[5m]) > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletServerCertificateRenewalErrors\"\n    \"annotations\":\n      \"description\": \"Kubelet on node {{ $labels.node }} has failed to renew its server certificate ({{ $value | humanize }} errors in the last 5 minutes).\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificaterenewalerrors\"\n      \"summary\": \"Kubelet has failed to renew its server certificate.\"\n    \"expr\": |\n      increase(kubelet_server_expiration_renew_errors[5m]) > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"KubeletDown\"\n    \"annotations\":\n      \"description\": \"Kubelet has disappeared from Prometheus target discovery.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletdown\"\n      \"summary\": \"Target disappeared from Prometheus target discovery.\"\n    \"expr\": |\n      absent(up{job=\"kubelet\"} == 1)\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"critical\"\n- \"name\": \"kubernetes-system-scheduler\"\n  \"rules\":\n  - \"alert\": \"KubeSchedulerDown\"\n    \"annotations\":\n      \"description\": \"KubeScheduler has disappeared from Prometheus target discovery.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown\"\n      \"summary\": \"Target disappeared from Prometheus target discovery.\"\n    \"expr\": |\n      absent(up{kubernetes_name=\"kube-scheduler\"} == 1)\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"critical\"\n- \"name\": \"kubernetes-system-controller-manager\"\n  \"rules\":\n  - \"alert\": \"KubeControllerManagerDown\"\n    \"annotations\":\n      \"description\": \"KubeControllerManager has disappeared from Prometheus target discovery.\"\n      \"runbook_url\": \"https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontrollermanagerdown\"\n      \"summary\": \"Target disappeared from Prometheus target discovery.\"\n    \"expr\": |\n      absent(up{kubernetes_name=\"kube-controller-manager\"} == 1)\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"critical\""
  "kubernetes.recording.rules.yaml": "\"groups\":\n- \"name\": \"kube-apiserver.rules\"\n  \"rules\":\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1d]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[1d]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[1d]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[1d]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[1d]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1d]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate1d\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1h]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[1h]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[1h]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[1h]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[1h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[1h]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate1h\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[2h]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[2h]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[2h]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[2h]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[2h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[2h]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate2h\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[30m]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[30m]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[30m]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[30m]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[30m]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[30m]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate30m\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[3d]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[3d]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[3d]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[3d]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[3d]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[3d]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate3d\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[5m]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[5m]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[5m]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[5m]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate5m\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[6h]))\n          -\n          (\n            (\n              sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[6h]))\n              or\n              vector(0)\n            )\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[6h]))\n            +\n            sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[6h]))\n          )\n        )\n        +\n        # errors\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\",code=~\"5..\"}[6h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[6h]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:burnrate6h\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[1d]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[1d]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate1d\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[1h]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[1h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate1h\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[2h]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[2h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate2h\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[30m]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[30m]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate30m\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[3d]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[3d]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate3d\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[5m]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[5m]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate5m\"\n  - \"expr\": |\n      (\n        (\n          # too slow\n          sum(rate(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))\n          -\n          sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[6h]))\n        )\n        +\n        sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",code=~\"5..\"}[6h]))\n      )\n      /\n      sum(rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:burnrate6h\"\n  - \"expr\": |\n      sum by (code,resource) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"code_resource:apiserver_request_total:rate5m\"\n  - \"expr\": |\n      sum by (code,resource) (rate(apiserver_request_total{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"code_resource:apiserver_request_total:rate5m\"\n  - \"expr\": |\n      histogram_quantile(0.99, sum by (le, resource) (rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[5m]))) > 0\n    \"labels\":\n      \"quantile\": \"0.99\"\n      \"verb\": \"read\"\n    \"record\": \"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.99, sum by (le, resource) (rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))) > 0\n    \"labels\":\n      \"quantile\": \"0.99\"\n      \"verb\": \"write\"\n    \"record\": \"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.99, sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.99\"\n    \"record\": \"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.9, sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.9\"\n    \"record\": \"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.5, sum(rate(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.5\"\n    \"record\": \"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile\"\n- \"interval\": \"3m\"\n  \"name\": \"kube-apiserver-availability.rules\"\n  \"rules\":\n  - \"expr\": |\n      1 - (\n        (\n          # write too slow\n          sum(increase(apiserver_request_duration_seconds_count{verb=~\"POST|PUT|PATCH|DELETE\"}[30d]))\n          -\n          sum(increase(apiserver_request_duration_seconds_bucket{verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[30d]))\n        ) +\n        (\n          # read too slow\n          sum(increase(apiserver_request_duration_seconds_count{verb=~\"LIST|GET\"}[30d]))\n          -\n          (\n            (\n              sum(increase(apiserver_request_duration_seconds_bucket{verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[30d]))\n              or\n              vector(0)\n            )\n            +\n            sum(increase(apiserver_request_duration_seconds_bucket{verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[30d]))\n            +\n            sum(increase(apiserver_request_duration_seconds_bucket{verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[30d]))\n          )\n        ) +\n        # errors\n        sum(code:apiserver_request_total:increase30d{code=~\"5..\"} or vector(0))\n      )\n      /\n      sum(code:apiserver_request_total:increase30d)\n    \"labels\":\n      \"verb\": \"all\"\n    \"record\": \"apiserver_request:availability30d\"\n  - \"expr\": |\n      1 - (\n        sum(increase(apiserver_request_duration_seconds_count{job=\"kube-apiserver\",verb=~\"LIST|GET\"}[30d]))\n        -\n        (\n          # too slow\n          (\n            sum(increase(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=~\"resource|\",le=\"0.1\"}[30d]))\n            or\n            vector(0)\n          )\n          +\n          sum(increase(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"namespace\",le=\"0.5\"}[30d]))\n          +\n          sum(increase(apiserver_request_duration_seconds_bucket{job=\"kube-apiserver\",verb=~\"LIST|GET\",scope=\"cluster\",le=\"5\"}[30d]))\n        )\n        +\n        # errors\n        sum(code:apiserver_request_total:increase30d{verb=\"read\",code=~\"5..\"} or vector(0))\n      )\n      /\n      sum(code:apiserver_request_total:increase30d{verb=\"read\"})\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"apiserver_request:availability30d\"\n  - \"expr\": |\n      1 - (\n        (\n          # too slow\n          sum(increase(apiserver_request_duration_seconds_count{verb=~\"POST|PUT|PATCH|DELETE\"}[30d]))\n          -\n          sum(increase(apiserver_request_duration_seconds_bucket{verb=~\"POST|PUT|PATCH|DELETE\",le=\"1\"}[30d]))\n        )\n        +\n        # errors\n        sum(code:apiserver_request_total:increase30d{verb=\"write\",code=~\"5..\"} or vector(0))\n      )\n      /\n      sum(code:apiserver_request_total:increase30d{verb=\"write\"})\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"apiserver_request:availability30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"LIST\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"GET\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"POST\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PUT\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PATCH\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"DELETE\",code=~\"2..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"LIST\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"GET\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"POST\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PUT\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PATCH\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"DELETE\",code=~\"3..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"LIST\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"GET\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"POST\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PUT\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PATCH\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"DELETE\",code=~\"4..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"LIST\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"GET\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"POST\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PUT\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"PATCH\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code, verb) (increase(apiserver_request_total{job=\"kube-apiserver\",verb=\"DELETE\",code=~\"5..\"}[30d]))\n    \"record\": \"code_verb:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code) (code_verb:apiserver_request_total:increase30d{verb=~\"LIST|GET\"})\n    \"labels\":\n      \"verb\": \"read\"\n    \"record\": \"code:apiserver_request_total:increase30d\"\n  - \"expr\": |\n      sum by (code) (code_verb:apiserver_request_total:increase30d{verb=~\"POST|PUT|PATCH|DELETE\"})\n    \"labels\":\n      \"verb\": \"write\"\n    \"record\": \"code:apiserver_request_total:increase30d\"\n- \"name\": \"k8s.rules\"\n  \"rules\":\n  - \"expr\": |\n      sum by (cluster, namespace, pod, container) (\n        rate(container_cpu_usage_seconds_total{job=\"cadvisor\", image!=\"\", container!=\"POD\"}[5m])\n      ) * on (cluster, namespace, pod) group_left(node) topk by (cluster, namespace, pod) (\n        1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=\"\"})\n      )\n    \"record\": \"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate\"\n  - \"expr\": |\n      container_memory_working_set_bytes{job=\"cadvisor\", image!=\"\"}\n      * on (namespace, pod) group_left(node) topk by(namespace, pod) (1,\n        max by(namespace, pod, node) (kube_pod_info{node!=\"\"})\n      )\n    \"record\": \"node_namespace_pod_container:container_memory_working_set_bytes\"\n  - \"expr\": |\n      container_memory_rss{job=\"cadvisor\", image!=\"\"}\n      * on (namespace, pod) group_left(node) topk by(namespace, pod) (1,\n        max by(namespace, pod, node) (kube_pod_info{node!=\"\"})\n      )\n    \"record\": \"node_namespace_pod_container:container_memory_rss\"\n  - \"expr\": |\n      container_memory_cache{job=\"cadvisor\", image!=\"\"}\n      * on (namespace, pod) group_left(node) topk by(namespace, pod) (1,\n        max by(namespace, pod, node) (kube_pod_info{node!=\"\"})\n      )\n    \"record\": \"node_namespace_pod_container:container_memory_cache\"\n  - \"expr\": |\n      container_memory_swap{job=\"cadvisor\", image!=\"\"}\n      * on (namespace, pod) group_left(node) topk by(namespace, pod) (1,\n        max by(namespace, pod, node) (kube_pod_info{node!=\"\"})\n      )\n    \"record\": \"node_namespace_pod_container:container_memory_swap\"\n  - \"expr\": |\n      sum by (namespace) (\n          sum by (namespace, pod) (\n              max by (namespace, pod, container) (\n                  kube_pod_container_resource_requests_memory_bytes{job=\"kube-state-metrics\"}\n              ) * on(namespace, pod) group_left() max by (namespace, pod) (\n                  kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n              )\n          )\n      )\n    \"record\": \"namespace:kube_pod_container_resource_requests_memory_bytes:sum\"\n  - \"expr\": |\n      sum by (namespace) (\n          sum by (namespace, pod) (\n              max by (namespace, pod, container) (\n                  kube_pod_container_resource_requests_cpu_cores{job=\"kube-state-metrics\"}\n              ) * on(namespace, pod) group_left() max by (namespace, pod) (\n                kube_pod_status_phase{phase=~\"Pending|Running\"} == 1\n              )\n          )\n      )\n    \"record\": \"namespace:kube_pod_container_resource_requests_cpu_cores:sum\"\n  - \"expr\": |\n      max by (cluster, namespace, workload, pod) (\n        label_replace(\n          label_replace(\n            kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"ReplicaSet\"},\n            \"replicaset\", \"$1\", \"owner_name\", \"(.*)\"\n          ) * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace) (\n            1, max by (replicaset, namespace, owner_name) (\n              kube_replicaset_owner{job=\"kube-state-metrics\"}\n            )\n          ),\n          \"workload\", \"$1\", \"owner_name\", \"(.*)\"\n        )\n      )\n    \"labels\":\n      \"workload_type\": \"deployment\"\n    \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\"\n  - \"expr\": |\n      max by (cluster, namespace, workload, pod) (\n        label_replace(\n          kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"DaemonSet\"},\n          \"workload\", \"$1\", \"owner_name\", \"(.*)\"\n        )\n      )\n    \"labels\":\n      \"workload_type\": \"daemonset\"\n    \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\"\n  - \"expr\": |\n      max by (cluster, namespace, workload, pod) (\n        label_replace(\n          kube_pod_owner{job=\"kube-state-metrics\", owner_kind=\"StatefulSet\"},\n          \"workload\", \"$1\", \"owner_name\", \"(.*)\"\n        )\n      )\n    \"labels\":\n      \"workload_type\": \"statefulset\"\n    \"record\": \"namespace_workload_pod:kube_pod_owner:relabel\"\n- \"name\": \"kube-scheduler.rules\"\n  \"rules\":\n  - \"expr\": |\n      histogram_quantile(0.99, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.99\"\n    \"record\": \"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.99, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.99\"\n    \"record\": \"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.99, sum(rate(scheduler_binding_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.99\"\n    \"record\": \"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.9, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.9\"\n    \"record\": \"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.9, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.9\"\n    \"record\": \"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.9, sum(rate(scheduler_binding_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.9\"\n    \"record\": \"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.5, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.5\"\n    \"record\": \"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.5, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.5\"\n    \"record\": \"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.5, sum(rate(scheduler_binding_duration_seconds_bucket{kubernetes_name=\"kube-scheduler\"}[5m])) without(instance, pod))\n    \"labels\":\n      \"quantile\": \"0.5\"\n    \"record\": \"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile\"\n- \"name\": \"node.rules\"\n  \"rules\":\n  - \"expr\": |\n      topk by(namespace, pod) (1,\n        max by (node, namespace, pod) (\n          label_replace(kube_pod_info{job=\"kube-state-metrics\",node!=\"\"}, \"pod\", \"$1\", \"pod\", \"(.*)\")\n      ))\n    \"record\": \"node_namespace_pod:kube_pod_info:\"\n  - \"expr\": |\n      count by (cluster, node) (sum by (node, cpu) (\n        node_cpu_seconds_total{job=\"node-exporter\"}\n      * on (namespace, pod) group_left(node)\n        node_namespace_pod:kube_pod_info:\n      ))\n    \"record\": \"node:node_num_cpu:sum\"\n  - \"expr\": |\n      sum(\n        node_memory_MemAvailable_bytes{job=\"node-exporter\"} or\n        (\n          node_memory_Buffers_bytes{job=\"node-exporter\"} +\n          node_memory_Cached_bytes{job=\"node-exporter\"} +\n          node_memory_MemFree_bytes{job=\"node-exporter\"} +\n          node_memory_Slab_bytes{job=\"node-exporter\"}\n        )\n      ) by (cluster)\n    \"record\": \":node_memory_MemAvailable_bytes:sum\"\n- \"name\": \"kubelet.rules\"\n  \"rules\":\n  - \"expr\": |\n      histogram_quantile(0.99, sum(rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) by (instance, le) * on(instance) group_left(node) kubelet_node_name{job=\"kubelet\"})\n    \"labels\":\n      \"quantile\": \"0.99\"\n    \"record\": \"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.9, sum(rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) by (instance, le) * on(instance) group_left(node) kubelet_node_name{job=\"kubelet\"})\n    \"labels\":\n      \"quantile\": \"0.9\"\n    \"record\": \"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile\"\n  - \"expr\": |\n      histogram_quantile(0.5, sum(rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) by (instance, le) * on(instance) group_left(node) kubelet_node_name{job=\"kubelet\"})\n    \"labels\":\n      \"quantile\": \"0.5\"\n    \"record\": \"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile\""
  "node.alerting.rules.yaml": "\"groups\":\n- \"name\": \"node-exporter\"\n  \"rules\":\n  - \"alert\": \"NodeFilesystemSpaceFillingUp\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available space left and is filling up.\"\n      \"summary\": \"Filesystem is predicted to run out of space within the next 24 hours.\"\n    \"expr\": |\n      (\n        node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"} / node_filesystem_size_bytes{job=\"node\",fstype!=\"\"} * 100 < 40\n      and\n        predict_linear(node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"}[6h], 24*60*60) < 0\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeFilesystemSpaceFillingUp\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available space left and is filling up fast.\"\n      \"summary\": \"Filesystem is predicted to run out of space within the next 4 hours.\"\n    \"expr\": |\n      (\n        node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"} / node_filesystem_size_bytes{job=\"node\",fstype!=\"\"} * 100 < 20\n      and\n        predict_linear(node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"}[6h], 4*60*60) < 0\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"NodeFilesystemAlmostOutOfSpace\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available space left.\"\n      \"summary\": \"Filesystem has less than 5% space left.\"\n    \"expr\": |\n      (\n        node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"} / node_filesystem_size_bytes{job=\"node\",fstype!=\"\"} * 100 < 5\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeFilesystemAlmostOutOfSpace\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available space left.\"\n      \"summary\": \"Filesystem has less than 3% space left.\"\n    \"expr\": |\n      (\n        node_filesystem_avail_bytes{job=\"node\",fstype!=\"\"} / node_filesystem_size_bytes{job=\"node\",fstype!=\"\"} * 100 < 3\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"NodeFilesystemFilesFillingUp\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available inodes left and is filling up.\"\n      \"summary\": \"Filesystem is predicted to run out of inodes within the next 24 hours.\"\n    \"expr\": |\n      (\n        node_filesystem_files_free{job=\"node\",fstype!=\"\"} / node_filesystem_files{job=\"node\",fstype!=\"\"} * 100 < 40\n      and\n        predict_linear(node_filesystem_files_free{job=\"node\",fstype!=\"\"}[6h], 24*60*60) < 0\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeFilesystemFilesFillingUp\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available inodes left and is filling up fast.\"\n      \"summary\": \"Filesystem is predicted to run out of inodes within the next 4 hours.\"\n    \"expr\": |\n      (\n        node_filesystem_files_free{job=\"node\",fstype!=\"\"} / node_filesystem_files{job=\"node\",fstype!=\"\"} * 100 < 20\n      and\n        predict_linear(node_filesystem_files_free{job=\"node\",fstype!=\"\"}[6h], 4*60*60) < 0\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"NodeFilesystemAlmostOutOfFiles\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available inodes left.\"\n      \"summary\": \"Filesystem has less than 5% inodes left.\"\n    \"expr\": |\n      (\n        node_filesystem_files_free{job=\"node\",fstype!=\"\"} / node_filesystem_files{job=\"node\",fstype!=\"\"} * 100 < 5\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeFilesystemAlmostOutOfFiles\"\n    \"annotations\":\n      \"description\": \"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \\\"%.2f\\\" $value }}% available inodes left.\"\n      \"summary\": \"Filesystem has less than 3% inodes left.\"\n    \"expr\": |\n      (\n        node_filesystem_files_free{job=\"node\",fstype!=\"\"} / node_filesystem_files{job=\"node\",fstype!=\"\"} * 100 < 3\n      and\n        node_filesystem_readonly{job=\"node\",fstype!=\"\"} == 0\n      )\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"NodeNetworkReceiveErrs\"\n    \"annotations\":\n      \"description\": \"{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf \\\"%.0f\\\" $value }} receive errors in the last two minutes.\"\n      \"summary\": \"Network interface is reporting many receive errors.\"\n    \"expr\": |\n      rate(node_network_receive_errs_total[2m]) / rate(node_network_receive_packets_total[2m]) > 0.01\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeNetworkTransmitErrs\"\n    \"annotations\":\n      \"description\": \"{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf \\\"%.0f\\\" $value }} transmit errors in the last two minutes.\"\n      \"summary\": \"Network interface is reporting many transmit errors.\"\n    \"expr\": |\n      rate(node_network_transmit_errs_total[2m]) / rate(node_network_transmit_packets_total[2m]) > 0.01\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeHighNumberConntrackEntriesUsed\"\n    \"annotations\":\n      \"description\": \"{{ $value | humanizePercentage }} of conntrack entries are used.\"\n      \"summary\": \"Number of conntrack are getting close to the limit.\"\n    \"expr\": |\n      (node_nf_conntrack_entries / node_nf_conntrack_entries_limit) > 0.75\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeTextFileCollectorScrapeError\"\n    \"annotations\":\n      \"description\": \"Node Exporter text file collector failed to scrape.\"\n      \"summary\": \"Node Exporter text file collector failed to scrape.\"\n    \"expr\": |\n      node_textfile_scrape_error{job=\"node\"} == 1\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeClockSkewDetected\"\n    \"annotations\":\n      \"description\": \"Clock on {{ $labels.instance }} is out of sync by more than 300s. Ensure NTP is configured correctly on this host.\"\n      \"summary\": \"Clock skew detected.\"\n    \"expr\": |\n      (\n        node_timex_offset_seconds > 0.05\n      and\n        deriv(node_timex_offset_seconds[5m]) >= 0\n      )\n      or\n      (\n        node_timex_offset_seconds < -0.05\n      and\n        deriv(node_timex_offset_seconds[5m]) <= 0\n      )\n    \"for\": \"10m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeClockNotSynchronising\"\n    \"annotations\":\n      \"description\": \"Clock on {{ $labels.instance }} is not synchronising. Ensure NTP is configured on this host.\"\n      \"summary\": \"Clock not synchronising.\"\n    \"expr\": |\n      min_over_time(node_timex_sync_status[5m]) == 0\n      and\n      node_timex_maxerror_seconds >= 16\n    \"for\": \"10m\"\n    \"labels\":\n      \"severity\": \"warning\"\n  - \"alert\": \"NodeRAIDDegraded\"\n    \"annotations\":\n      \"description\": \"RAID array '{{ $labels.device }}' on {{ $labels.instance }} is in degraded state due to one or more disks failures. Number of spare drives is insufficient to fix issue automatically.\"\n      \"summary\": \"RAID Array is degraded\"\n    \"expr\": |\n      node_md_disks_required - ignoring (state) (node_md_disks{state=\"active\"}) > 0\n    \"for\": \"15m\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"NodeRAIDDiskFailure\"\n    \"annotations\":\n      \"description\": \"At least one device in RAID array on {{ $labels.instance }} failed. Array '{{ $labels.device }}' needs attention and possibly a disk swap.\"\n      \"summary\": \"Failed device in RAID array\"\n    \"expr\": |\n      node_md_disks{state=\"failed\"} > 0\n    \"labels\":\n      \"severity\": \"warning\""
  "node.recording.rules.yaml": "\"groups\":\n- \"name\": \"node-exporter.rules\"\n  \"rules\":\n  - \"expr\": |\n      count without (cpu) (\n        count without (mode) (\n          node_cpu_seconds_total{job=\"node\"}\n        )\n      )\n    \"record\": \"instance:node_num_cpu:sum\"\n  - \"expr\": |\n      1 - avg without (cpu, mode) (\n        rate(node_cpu_seconds_total{job=\"node\", mode=\"idle\"}[5m])\n      )\n    \"record\": \"instance:node_cpu_utilisation:rate5m\"\n  - \"expr\": |\n      (\n        node_load1{job=\"node\"}\n      /\n        instance:node_num_cpu:sum{job=\"node\"}\n      )\n    \"record\": \"instance:node_load1_per_cpu:ratio\"\n  - \"expr\": |\n      1 - (\n        node_memory_MemAvailable_bytes{job=\"node\"}\n      /\n        node_memory_MemTotal_bytes{job=\"node\"}\n      )\n    \"record\": \"instance:node_memory_utilisation:ratio\"\n  - \"expr\": |\n      rate(node_vmstat_pgmajfault{job=\"node\"}[5m])\n    \"record\": \"instance:node_vmstat_pgmajfault:rate5m\"\n  - \"expr\": |\n      rate(node_disk_io_time_seconds_total{job=\"node\", device!=\"\"}[5m])\n    \"record\": \"instance_device:node_disk_io_time_seconds:rate5m\"\n  - \"expr\": |\n      rate(node_disk_io_time_weighted_seconds_total{job=\"node\", device!=\"\"}[5m])\n    \"record\": \"instance_device:node_disk_io_time_weighted_seconds:rate5m\"\n  - \"expr\": |\n      sum without (device) (\n        rate(node_network_receive_bytes_total{job=\"node\", device!=\"lo\"}[5m])\n      )\n    \"record\": \"instance:node_network_receive_bytes_excluding_lo:rate5m\"\n  - \"expr\": |\n      sum without (device) (\n        rate(node_network_transmit_bytes_total{job=\"node\", device!=\"lo\"}[5m])\n      )\n    \"record\": \"instance:node_network_transmit_bytes_excluding_lo:rate5m\"\n  - \"expr\": |\n      sum without (device) (\n        rate(node_network_receive_drop_total{job=\"node\", device!=\"lo\"}[5m])\n      )\n    \"record\": \"instance:node_network_receive_drop_excluding_lo:rate5m\"\n  - \"expr\": |\n      sum without (device) (\n        rate(node_network_transmit_drop_total{job=\"node\", device!=\"lo\"}[5m])\n      )\n    \"record\": \"instance:node_network_transmit_drop_excluding_lo:rate5m\""
  "prometheus.yaml": "\"global\":\n  \"scrape_interval\": \"30s\"\n\"rule_files\":\n- \"/etc/prometheus/*.rules.yaml\"\n\"scrape_configs\":\n- \"bearer_token_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  \"job_name\": \"kube-apiserver\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"endpoints\"\n  \"relabel_configs\":\n  - \"action\": \"keep\"\n    \"regex\": \"default;kubernetes;https\"\n    \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    - \"__meta_kubernetes_service_name\"\n    - \"__meta_kubernetes_endpoint_port_name\"\n  \"scheme\": \"https\"\n  \"tls_config\":\n    \"ca_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n- \"bearer_token_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  \"job_name\": \"kubelet\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"node\"\n  \"relabel_configs\":\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_node_label_(.+)\"\n  - \"replacement\": \"kubernetes.default.svc:443\"\n    \"target_label\": \"__address__\"\n  - \"regex\": \"(.+)\"\n    \"replacement\": \"/api/v1/nodes/${1}/proxy/metrics\"\n    \"source_labels\":\n    - \"__meta_kubernetes_node_name\"\n    \"target_label\": \"__metrics_path__\"\n  \"scheme\": \"https\"\n  \"tls_config\":\n    \"ca_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n- \"bearer_token_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  \"job_name\": \"cadvisor\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"node\"\n  \"metric_relabel_configs\":\n  - \"action\": \"drop\"\n    \"regex\": \"container_([a-z_]+);\"\n    \"source_labels\":\n    - \"__name__\"\n    - \"image\"\n  - \"action\": \"drop\"\n    \"regex\": \"container_(network_tcp_usage_total|network_udp_usage_total|tasks_state|cpu_load_average_10s)\"\n    \"source_labels\":\n    - \"__name__\"\n  \"relabel_configs\":\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_node_label_(.+)\"\n  - \"replacement\": \"kubernetes.default.svc:443\"\n    \"target_label\": \"__address__\"\n  - \"regex\": \"(.+)\"\n    \"replacement\": \"/api/v1/nodes/${1}/proxy/metrics/cadvisor\"\n    \"source_labels\":\n    - \"__meta_kubernetes_node_name\"\n    \"target_label\": \"__metrics_path__\"\n  \"scheme\": \"https\"\n  \"tls_config\":\n    \"ca_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n- \"bearer_token_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  \"job_name\": \"kube-state-metrics\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"pod\"\n  \"relabel_configs\":\n  - \"action\": \"keep\"\n    \"regex\": \"kube-state-metrics\"\n    \"source_labels\":\n    - \"__meta_kubernetes_pod_label_name\"\n  - \"action\": \"replace\"\n    \"separator\": \":\"\n    \"source_labels\":\n    - \"__meta_kubernetes_pod_name\"\n    - \"__meta_kubernetes_pod_container_port_name\"\n    \"target_label\": \"instance\"\n  \"tls_config\":\n    \"ca_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n- \"bearer_token_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n  \"job_name\": \"node\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"pod\"\n  \"relabel_configs\":\n  - \"action\": \"keep\"\n    \"regex\": \"node-exporter\"\n    \"source_labels\":\n    - \"__meta_kubernetes_pod_label_name\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_pod_node_name\"\n    \"target_label\": \"instance\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    \"target_label\": \"namespace\"\n  - \"replacement\": \"${1}:9100\"\n    \"source_labels\":\n    - \"__address__\"\n    \"target_label\": \"__address__\"\n  \"tls_config\":\n    \"ca_file\": \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n- \"job_name\": \"kubernetes-service-endpoints\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"endpoints\"\n  \"relabel_configs\":\n  - \"action\": \"keep\"\n    \"regex\": \"true\"\n    \"source_labels\":\n    - \"__meta_kubernetes_service_annotation_prometheus_io_scrape\"\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_service_label_(.+)\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    \"target_label\": \"kubernetes_namespace\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_service_name\"\n    \"target_label\": \"kubernetes_name\"\n- \"job_name\": \"kubernetes-services\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"service\"\n  \"metrics_path\": \"/probe\"\n  \"params\":\n    \"module\":\n    - \"http_2xx\"\n  \"relabel_configs\":\n  - \"source_labels\":\n    - \"__address__\"\n    \"target_label\": \"__param_target\"\n  - \"replacement\": \"blackbox-exporter:9115\"\n    \"target_label\": \"__address__\"\n  - \"source_labels\":\n    - \"__param_target\"\n    \"target_label\": \"instance\"\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_service_label_(.+)\"\n  - \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    \"target_label\": \"kubernetes_namespace\"\n  - \"source_labels\":\n    - \"__meta_kubernetes_service_name\"\n    \"target_label\": \"kubernetes_name\"\n- \"job_name\": \"kubernetes-ingresses\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"ingress\"\n  \"metrics_path\": \"/probe\"\n  \"params\":\n    \"module\":\n    - \"http_2xx\"\n  \"relabel_configs\":\n  - \"regex\": \"(.+);(.+);(.+)\"\n    \"replacement\": \"${1}://${2}${3}\"\n    \"source_labels\":\n    - \"__meta_kubernetes_ingress_scheme\"\n    - \"__address__\"\n    - \"__meta_kubernetes_ingress_path\"\n    \"target_label\": \"__param_target\"\n  - \"replacement\": \"blackbox-exporter:9115\"\n    \"target_label\": \"__address__\"\n  - \"source_labels\":\n    - \"__param_target\"\n    \"target_label\": \"instance\"\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_ingress_label_(.+)\"\n  - \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    \"target_label\": \"kubernetes_namespace\"\n  - \"source_labels\":\n    - \"__meta_kubernetes_ingress_name\"\n    \"target_label\": \"kubernetes_name\"\n- \"job_name\": \"kubernetes-pods\"\n  \"kubernetes_sd_configs\":\n  - \"role\": \"pod\"\n  \"relabel_configs\":\n  - \"action\": \"keep\"\n    \"regex\": \"true\"\n    \"source_labels\":\n    - \"__meta_kubernetes_service_annotation_prometheus_io_scrape\"\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_pod_label_(.+)\"\n  - \"action\": \"replace\"\n    \"replacement\": \"$1\"\n    \"separator\": \"/\"\n    \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    - \"__meta_kubernetes_pod_label_name\"\n    \"target_label\": \"job\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_namespace\"\n    \"target_label\": \"namespace\"\n  - \"action\": \"replace\"\n    \"source_labels\":\n    - \"__meta_kubernetes_pod_name\"\n    \"target_label\": \"instance\"\n  - \"action\": \"labelmap\"\n    \"regex\": \"__meta_kubernetes_pod_annotation_prometheus_io_param_(.+)\"\n    \"replacement\": \"__param_$1\"\n- \"job_name\": \"pluto-node-exporter\"\n  \"static_configs\":\n  - \"targets\":\n    - \"78.47.234.52:9100\"\n- \"job_name\": \"pluto-kubelet\"\n  \"scheme\": \"https\"\n  \"static_configs\":\n  - \"targets\":\n    - \"78.47.234.52:10250\"\n    - \"78.47.234.52:10250\"\n  \"tls_config\":\n    \"ca_file\": \"/etc/prometheus/pluto-kubelet-ca/ca.pem\"\n    \"cert_file\": \"/etc/prometheus/pluto-kubelet/tls.crt\"\n    \"insecure_skip_verify\": true\n    \"key_file\": \"/etc/prometheus/pluto-kubelet/tls.key\"\n- \"job_name\": \"pluto-cadvisor\"\n  \"metrics_path\": \"/metrics/cadvisor\"\n  \"scheme\": \"https\"\n  \"static_configs\":\n  - \"targets\":\n    - \"78.47.234.52:10250\"\n  \"tls_config\":\n    \"ca_file\": \"/etc/prometheus/pluto-kubelet-ca/ca.pem\"\n    \"cert_file\": \"/etc/prometheus/pluto-kubelet/tls.crt\"\n    \"insecure_skip_verify\": true\n    \"key_file\": \"/etc/prometheus/pluto-kubelet/tls.key\""
"kind": "ConfigMap"
"metadata":
  "name": "prometheus"
  "namespace": "monitoring"